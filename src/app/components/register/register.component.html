<div class="container">
  <div class="row mt-4">
    <div class="col-md-4">
      <form class="auth-form" [formGroup]="registerForm" (ngSubmit)="signup()">
        <div class="form-group">
          <label for="username">UserName</label>
          <input
            type="text"
            [class.is-invalid]="
              registerForm.get('username')!.invalid &&
              registerForm.get('username')!.touched
            "
            id="username"
            name="username"
            formControlName="username"
            class="form-control"
          />

          <div *ngIf="form['username'].invalid && form['username'].touched">
            <small
              class="text-danger"
              *ngIf="
                form['username'].errors && form['username'].errors['required']
              "
              >Username is required</small
            >
            <small
              class="text-danger"
              *ngIf="
                form['username'].errors &&
                form['username'].errors['forbiddenName']
              "
            >
              '{{ form["username"].errors["forbiddenName"].value }}' username
              not allowed</small
            >
          </div>
        </div>
        <div class="form-group">
          <label for="email">Email</label>
          <input
            type="text"
            [class.is-invalid]="
              registerForm.get('email')!.invalid &&
              registerForm.get('email')!.touched
            "
            id="email"
            name="email"
            pattern="[^@\s]+@[^@\s]+\.[^@\s]+"
            formControlName="email"
            class="form-control"
          />

          <div *ngIf="form['email'].invalid && form['email'].touched">
            <small
              class="text-danger"
              *ngIf="form['email'].errors && form['email'].errors['required']"
              >Email is required</small
            >
            <small
              class="text-danger"
              *ngIf="form['email'].errors && form['email'].errors['pattern']"
              >Please enter a valid email</small
            >
          </div>
        </div>
        <div formGroupName="address">
          <div class="form-group">
            <label for="City">City</label>
            <input
              type="text"
              name="city"
              id="city"
              formControlName="city"
              class="form-control"
            />
          </div>
          <div class="form-group">
            <label for="Postal">Postal</label>
            <input
              type="text"
              name="postal"
              id="postal"
              formControlName="postal"
              class="form-control"
            />
          </div>
          <div class="form-group">
            <label for="state">State</label>
            <input
              type="text"
              name="state"
              id="state"
              formControlName="state"
              class="form-control"
            />
          </div>
        </div>
        <div class="form-group">
          <label for="password">Password</label>
          <input
            type="password"
            id="password"
            name="password"
            formControlName="password"
            class="form-control"
            [class.is-invalid]="
              registerForm.get('password')!.invalid &&
              registerForm.get('password')!.touched
            "
          />
          <div *ngIf="form['password'].invalid && form['password'].touched">
            <small
              class="text-danger"
              *ngIf="
                form['password'].errors && form['password'].errors['required']
              "
              >password is required</small
            >
          </div>
        </div>
        <div class="form-group">
          <label for="confirmpassword">Confirm Password</label>
          <input
            type="password"
            id="confirmpassword"
            [class.is-invalid]="
              registerForm.get('confirmpassword')!.invalid &&
              registerForm.get('confirmpassword')!.touched
            "
            name="confirmpassword"
            formControlName="confirmpassword"
            class="form-control"
          />
          <div
            *ngIf="
              form['confirmpassword'].invalid && form['confirmpassword'].touched
            "
          >
            <small
              class="text-danger"
              *ngIf="
                form['confirmpassword'].errors &&
                form['confirmpassword'].errors['required']
              "
              >confirmpassword is required</small
            >
            <small
              class="text-danger"
              *ngIf="
                form['confirmpassword'].errors &&
                form['confirmpassword'].errors['mustMatch']
              "
              >Passwords do not match</small
            >
          </div>
          <div
            *ngIf="submitted && form['confirmpassword'].errors"
            class="alert alert-danger"
          >
            <div *ngIf="form['confirmpassword'].errors['required']">
              Confirm Password is required
            </div>
            <div *ngIf="form['confirmpassword'].errors['mismatch']">
              Password do not match
            </div>
          </div>
        </div>
        <button class="mt-3" mat-raised-button color="accent">Submit</button>
        <p class="mt-3">
          Already registered ?&nbsp;<a routerLink="/login">Login</a>
        </p>
      </form>
      <button
        class="mt-3"
        mat-raised-button
        color="accent"
        (click)="getUsers()"
      >
        List Users
      </button>
    </div>
  </div>
</div>
<div class="container">
  <div class="col-md-4" *ngFor="let user of users">
    <p>{{ user.username }}</p>
    <p>{{ user.password }}</p>
    <p>{{ user.token }}</p>
  </div>
</div>
