<div class="wrapper">
  <div class="row">
    <div class="col container-header">
      <p>Create task</p>
      <mat-icon class="close-icon" (click)="closeAddTask()">close</mat-icon>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <form [formGroup]="addTaskForm" class="add-task-form">
        <div class="row">
          <label class="field-label">Task name</label><br />
          <mat-form-field appearance="outline" floatLabel="never">
            <input
              matInput
              name="task"
              placeholder="Enter task name"
              formControlName="task"
            />
          </mat-form-field>
          <div
            *ngIf="
              addTaskControl['task'].invalid && addTaskControl['task'].touched
            "
            class="error-message"
          >
            <div
              *ngIf="
                addTaskControl['task'].errors &&
                addTaskControl['task'].errors['required']
              "
            >
              <i class="fas fa-exclamation-circle"></i>Task name is required
            </div>
          </div>
        </div>

        <div class="form-group row task-features">
          <div class="col">
            <label class="field-label">Choose priority</label>
            <mat-form-field appearance="outline" floatLabel="never">
              <mat-label>Choose list</mat-label>
              <mat-select formControlName="list">
                <mat-option *ngFor="let list of lists" [value]="list.list">
                  {{ list.list }}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <div
              *ngIf="
                addTaskControl['list'].invalid && addTaskControl['list'].touched
              "
              class="error-message"
            >
              <div
                *ngIf="
                  addTaskControl['list'].errors &&
                  addTaskControl['list'].errors['required']
                "
              >
                <i class="fas fa-exclamation-circle"></i>Please choose a list
              </div>
            </div>
          </div>

          <div class="col">
            <label class="field-label">Choose priority</label>
            <mat-form-field appearance="outline" floatLabel="never">
              <mat-label>Choose priority</mat-label>
              <mat-select formControlName="priority">
                <mat-option value="High">High</mat-option>
                <mat-option value="Medium">Medium</mat-option>
                <mat-option value="Low">Low</mat-option>
              </mat-select>
            </mat-form-field>
            <div
              *ngIf="
                addTaskControl['priority'].invalid &&
                addTaskControl['priority'].touched
              "
              class="error-message"
            >
              <div
                *ngIf="
                  addTaskControl['priority'].errors &&
                  addTaskControl['priority'].errors['required']
                "
              >
                <i class="fas fa-exclamation-circle"></i>Please choose a
                priority
              </div>
            </div>
          </div>
          <div class="col">
            <label class="field-label">Set date and time</label>

            <mat-form-field appearance="outline" floatLabel="never">
              <mat-icon matPrefix>event</mat-icon>
              <input
                matInput
                name="date"
                type="datetime-local"
                placeholder="Choose date and time"
                formControlName="date"
              />
            </mat-form-field>

            <div
              *ngIf="
                addTaskControl['date'].invalid && addTaskControl['date'].touched
              "
              class="error-message"
            >
              <div
                *ngIf="
                  addTaskControl['date'].errors &&
                  addTaskControl['date'].errors['required']
                "
              >
                <i class="fas fa-exclamation-circle"></i>Please choose a date
              </div>
            </div>
          </div>
        </div>

        <div class="buttons">
          <app-button
            text="Cancel"
            width="144px"
            background="#fff"
            color="#BE263B"
            border="1px solid #BE263B"
            (btnClick)="closeAddTask()"
          ></app-button>
          <app-button
            text="Add Task"
            width="144px"
            [disabled]="addTaskForm.invalid"
            (btnClick)="addTask()"
          >
          </app-button>
          <span class="warning" *ngIf="addTaskForm.invalid">
            <sup>*</sup>Fill all fields to activate submit button.
          </span>
        </div>
      </form>
    </div>
  </div>
</div>
